{
  "id": "snapshot_1766898141782_4ehgsq9fn",
  "approvalId": "approval_1766898141779_x1dudxd3w",
  "approvalTitle": "Steering Structure Document",
  "version": 1,
  "timestamp": "2025-12-28T05:02:21.782Z",
  "trigger": "initial",
  "status": "pending",
  "content": "# Project Structure\n\n## Directory Organization\n\n```\nproject-root/\n├── approot/                  # Flask アプリ本体\n│   ├── app.py                # Flask エントリポイント\n│   ├── db.py                 # DB アクセスレイヤ（SQLAlchemy 予定）\n│   ├── config/\n│   │   └── entities.yaml     # モデル駆動エンティティ定義\n│   ├── templates/            # Jinja2 テンプレート\n│   │   ├── base.html         # ベースレイアウト\n│   │   ├── layout.html       # 画面枠レイアウト\n│   │   ├── components/       # 共通 UI コンポーネント\n│   │   │   ├── header.html\n│   │   │   └── nav.html\n│   │   └── partials/         # HTMX で返す部分テンプレート\n│   │       ├── list.html\n│   │       └── detail.html\n│   ├── requirements.txt      # アプリ依存\n│   └── .env / .databrickscfg # 環境・接続設定\n├── docs/\n│   └── draft/                # 検討レポート等\n└── .spec-workflow/           # spec/steering ドキュメント\n    ├── steering/             # 本ドキュメント群\n    ├── templates/            # テンプレート\n    ├── specs/                # 仕様書\n    └── approvals/            # 承認記録\n```\n\n## Naming Conventions\n\n### Files\n- Flask/Python: `snake_case.py`\n- Templates: `kebab-case.html`（必要に応じてディレクトリで役割分離）\n- Config: `snake_case.yaml`\n- Tests（将来追加）: `test_*.py`\n\n### Code\n- Functions/Variables: `snake_case`\n- Classes: `PascalCase`\n- Constants: `UPPER_SNAKE_CASE`\n\n## Import Patterns\n- 標準ライブラリ → サードパーティ → ローカルモジュールの順にグループ化。\n- ルート配下からの相対インポート（`approot` 内は相対/絶対いずれも可だが一貫性を優先）。\n- DB アクセスは `db.py` に集約し、将来は SQLAlchemy セッションをサービス層へ DI する前提。\n\n## Code Structure Patterns\n- ファイル内順序: Imports → 定数/設定 → 関数/クラス定義 → 実装 → エントリポイント。\n- Flask ルートは `app.py`（将来 Blueprint 分割可）。DB 呼び出しは `db.py` 経由。\n- HTMX エンドポイントは部分テンプレートを返し、テンプレート側で `hx-target`/`hx-trigger` を指定。\n\n## Code Organization Principles\n1. **Single Responsibility**: 各ファイルは明確な役割を一つ持つ。\n2. **Modularity**: 共通 UI は components/、部分レスポンスは partials/ に分離。\n3. **Testability**: DB 呼び出しを関数化し、pytest でモックしやすくする。\n4. **Consistency**: Tailwind/DaisyUI クラスと命名規則を統一。\n\n## Module Boundaries\n- UI（templates）とロジック（Flask + db.py）を分離。\n- 将来、サービス層・リポジトリ層を `approot/services/` と `approot/repositories/` に追加する際は依存方向を UI → サービス → リポジトリ → DB とする。\n\n## Code Size Guidelines\n- 目安: 1 ファイル 300 行程度まで。関数は 30〜50 行を目安に分割。\n- 深いネストは 3 レベル以内を推奨。\n\n## Dashboard/Monitoring Structure (if applicable)\n- 現状なし。将来追加する場合は `approot/monitoring/` など独立ディレクトリを作り、UI/ロジックと分離。\n\n## Documentation Standards\n- 新規モジュールには README や docstring を付与（特に DB アクセス・HTMX エンドポイント）。\n- 複雑なロジックには最小限のコメントを追加。\n",
  "fileStats": {
    "size": 3696,
    "lines": 75,
    "lastModified": "2025-12-28T05:02:19.920Z"
  },
  "comments": []
}