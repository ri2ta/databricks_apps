{% if entity and columns %}
  {# New entity-driven rendering using datagrid component #}
  {% include 'components/datagrid.html' %}
{% else %}
  {# Legacy rendering for backward compatibility #}
  <div class="card bg-base-100 shadow p-4">
    <h2 class="text-xl font-bold mb-4">一覧</h2>

    <table class="table w-full">
      <thead>
        <tr>
          <th>ID</th>
          <th>名前</th>
          <th>年齢</th>
        </tr>
      </thead>
      <tbody>
        {% for c in customers %}
        <tr>
          <td>{{ c.customerid }}</td>
          <td>{{ c.name }}</td>
          <td>{{ c.age }}</td>
          <td>
            <button class="btn btn-sm"
                hx-get="/detail/{{ c.customerid }}"
                hx-target="#main-pane"
                hx-history-elt>
              詳細
            </button>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
{% endif %}